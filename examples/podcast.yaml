# synchronize Podcasts from Odeo subscription, download all the
# episodes, rewrite enclosure URL and republish as RSS 2.0 podcast
# locally
plugins:
  - module: Subscription::Odeo
    config:
      account: TatsuhikoMiyagawa

  - module: Filter::TruePermalink

  - module: Filter::FetchEnclosure
    config:
      dir: /home/miyagawa/public_html/podcasts

  - module: Filter::RewriteEnclosureURL
    config:
      rewrite:
        - local: /home/miyagawa/public_html/
          url:   http://rock/~miyagawa/

  - module: SmartFeed::All

  - module: Publish::Feed
    rule:
      expression: $args->{feed}->id eq 'smartfeed:all'
    config:
      dir: /home/miyagawa/public_html/feeds
      format: RSS
      filename: odeo.xml
